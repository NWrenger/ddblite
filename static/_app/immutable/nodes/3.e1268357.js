import{s as dt,f as ut,i as ft,n as rt,r as pt}from"../chunks/scheduler.56f0b95c.js";import{S as mt,i as ht,g as o,s as V,z as vt,h as r,f as u,c as j,j as g,x,k as a,y as n,a as lt,A as U,B as it}from"../chunks/index.8ac81898.js";import{p as _t}from"../chunks/parse.bee59afc.js";import{j as bt,k as gt}from"../chunks/singletons.fae7af89.js";const yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,wt=!0,kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:wt},Symbol.toStringTag,{value:"Module"})),Et=bt("invalidate_all");function Lt(t){return gt.apply_action(t)}function Tt(t){const l=JSON.parse(t);return l.data&&(l.data=_t(l.data)),l}function ct(t){return HTMLElement.prototype.cloneNode.call(t)}function It(t,l=()=>{}){const m=async({action:e,result:i,reset:h})=>{i.type==="success"&&(h!==!1&&HTMLFormElement.prototype.reset.call(t),await Et()),(location.origin+location.pathname===e.origin+e.pathname||i.type==="redirect"||i.type==="error")&&Lt(i)};async function c(e){var N,k,I,d;if(((N=e.submitter)!=null&&N.hasAttribute("formmethod")?e.submitter.formMethod:ct(t).method)!=="post")return;e.preventDefault();const h=new URL((k=e.submitter)!=null&&k.hasAttribute("formaction")?e.submitter.formAction:ct(t).action),v=new FormData(t),E=(I=e.submitter)==null?void 0:I.getAttribute("name");E&&v.append(E,((d=e.submitter)==null?void 0:d.getAttribute("value"))??"");const L=new AbortController;let T=!1;const y=await l({action:h,cancel:()=>T=!0,controller:L,get data(){return v},formData:v,get form(){return t},formElement:t,submitter:e.submitter})??m;if(T)return;let f;try{const s=await fetch(h,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:v,signal:L.signal});f=Tt(await s.text()),f.type==="error"&&(f.status=s.status)}catch(s){if((s==null?void 0:s.name)==="AbortError")return;f={type:"error",error:s}}y({action:h,get data(){return v},formData:v,get form(){return t},formElement:t,update:s=>m({action:h,result:f,reset:s==null?void 0:s.reset}),result:f})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",c)}}}const{document:Q}=yt;function Ct(t){let l,m,c,e,i,h='<div class="container-fluid"><a href="/login.html" class="navbar-brand svelte-2m1rv2">SNDI</a></div>',v,E,L,T,A,y,f,N="Login",k,I,d,s,_,R,D,W="Benutzername",G,C,b,J,M,X="Passwort",$,S,Y='<button type="submit" class="btn btn-primary">Login</button>',O,P,K,Z;return{c(){l=o("meta"),m=V(),c=o("section"),e=o("div"),i=o("nav"),i.innerHTML=h,v=V(),E=o("div"),L=o("div"),T=o("div"),A=o("div"),y=o("div"),f=o("h5"),f.textContent=N,k=V(),I=o("div"),d=o("form"),s=o("div"),_=o("input"),R=V(),D=o("label"),D.textContent=W,G=V(),C=o("div"),b=o("input"),J=V(),M=o("label"),M.textContent=X,$=V(),S=o("div"),S.innerHTML=Y,this.h()},l(p){const w=vt("svelte-1yk2yl2",Q.head);l=r(w,"META",{name:!0,content:!0}),w.forEach(u),m=j(p),c=r(p,"SECTION",{});var tt=g(c);e=r(tt,"DIV",{class:!0});var z=g(e);i=r(z,"NAV",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-12l9art"&&(i.innerHTML=h),v=j(z),E=r(z,"DIV",{class:!0});var et=g(E);L=r(et,"DIV",{class:!0});var at=g(L);T=r(at,"DIV",{class:!0});var nt=g(T);A=r(nt,"DIV",{class:!0});var st=g(A);y=r(st,"DIV",{class:!0});var B=g(y);f=r(B,"H5",{class:!0,"data-svelte-h":!0}),x(f)!=="svelte-1n40lkb"&&(f.textContent=N),k=j(B),I=r(B,"DIV",{class:!0});var ot=g(I);d=r(ot,"FORM",{method:!0,action:!0});var H=g(d);s=r(H,"DIV",{class:!0});var F=g(s);_=r(F,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),R=j(F),D=r(F,"LABEL",{for:!0,"data-svelte-h":!0}),x(D)!=="svelte-1ubyjfg"&&(D.textContent=W),F.forEach(u),G=j(H),C=r(H,"DIV",{class:!0});var q=g(C);b=r(q,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),J=j(q),M=r(q,"LABEL",{for:!0,"data-svelte-h":!0}),x(M)!=="svelte-2d9uwq"&&(M.textContent=X),q.forEach(u),$=j(H),S=r(H,"DIV",{class:!0,"data-svelte-h":!0}),x(S)!=="svelte-1wz249l"&&(S.innerHTML=Y),H.forEach(u),ot.forEach(u),B.forEach(u),st.forEach(u),nt.forEach(u),at.forEach(u),et.forEach(u),z.forEach(u),tt.forEach(u),this.h()},h(){Q.title="Login",a(l,"name","description"),a(l,"content","Login Page"),a(i,"class","nav navbar bg-secondary-subtle svelte-2m1rv2"),a(f,"class","card-title p-1"),a(_,"type","text"),a(_,"class","form-control"),a(_,"id","username"),a(_,"placeholder","Benutzername eingeben"),_.required=!0,a(D,"for","username"),a(s,"class","form-floating mb-3"),a(b,"type","password"),a(b,"class","form-control"),a(b,"id","password"),a(b,"placeholder","Passwort eingeben"),b.required=!0,a(M,"for","password"),a(C,"class","form-floating mb-3"),a(S,"class","d-grid gap-2"),a(d,"method","GET"),a(d,"action",O="/login/fetch/"+t[0]),a(I,"class","card-text"),a(y,"class","card-body"),a(A,"class","card"),a(T,"class","col-md-6"),a(L,"class","row p-2 h-75 align-items-center justify-content-center"),a(E,"class","container svelte-2m1rv2"),a(e,"class","main svelte-2m1rv2")},m(p,w){n(Q.head,l),lt(p,m,w),lt(p,c,w),n(c,e),n(e,i),n(e,v),n(e,E),n(E,L),n(L,T),n(T,A),n(A,y),n(y,f),n(y,k),n(y,I),n(I,d),n(d,s),n(s,_),U(_,t[0]),n(s,R),n(s,D),n(d,G),n(d,C),n(C,b),U(b,t[1]),n(C,J),n(C,M),n(d,$),n(d,S),K||(Z=[it(_,"input",t[2]),it(b,"input",t[3]),ut(P=It.call(null,d,t[4]))],K=!0)},p(p,[w]){w&1&&_.value!==p[0]&&U(_,p[0]),w&2&&b.value!==p[1]&&U(b,p[1]),w&1&&O!==(O="/login/fetch/"+p[0])&&a(d,"action",O),P&&ft(P.update)&&w&3&&P.update.call(null,p[4])},i:rt,o:rt,d(p){p&&(u(m),u(c)),u(l),K=!1,pt(Z)}}}async function At(t,l){const m=btoa(t+":"+l),c="/login/fetch/"+encodeURIComponent(t),e=await fetch(c,{method:"GET",headers:{Authorization:"Basic "+m,"Content-Type":"application/json; charset=utf-8"}}),i=await e.json();if(e.status===200)window.localStorage.setItem("auth",m),window.localStorage.setItem("current_user",t),window.localStorage.setItem("permissions",JSON.stringify(i.Ok)),window.open("/","_self");else{const h=document.getElementsByTagName("input");for(const v of h)v.classList.add("is-invalid")}}function Dt(t,l,m){let c="",e="";function i(){c=this.value,m(0,c)}function h(){e=this.value,m(1,e)}return[c,e,i,h,()=>{At(c,e)}]}class Ht extends mt{constructor(l){super(),ht(this,l,Dt,Ct,dt,{})}}export{Ht as component,kt as universal};
