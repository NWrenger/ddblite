import{s as ut,f as dt,i as ft,n as ot,r as pt}from"../chunks/scheduler.56f0b95c.js";import{S as mt,i as vt,g as s,s as V,z as ht,h as o,f as d,c as k,j as w,x as O,k as a,y as n,a as lt,A as R,B as it}from"../chunks/index.8ac81898.js";import{p as _t}from"../chunks/parse.bee59afc.js";import{j as bt,k as gt}from"../chunks/singletons.069f320d.js";const yt=!0,kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:yt},Symbol.toStringTag,{value:"Module"})),wt=bt("invalidate_all");function Et(t){return gt.apply_action(t)}function Lt(t){const l=JSON.parse(t);return l.data&&(l.data=_t(l.data)),l}function ct(t){return HTMLElement.prototype.cloneNode.call(t)}function It(t,l=()=>{}){const f=async({action:e,result:i,reset:b})=>{i.type==="success"&&(b!==!1&&HTMLFormElement.prototype.reset.call(t),await wt()),(location.origin+location.pathname===e.origin+e.pathname||i.type==="redirect"||i.type==="error")&&Et(i)};async function c(e){var N,j,C,m;if(((N=e.submitter)!=null&&N.hasAttribute("formmethod")?e.submitter.formMethod:ct(t).method)!=="post")return;e.preventDefault();const b=new URL((j=e.submitter)!=null&&j.hasAttribute("formaction")?e.submitter.formAction:ct(t).action),_=new FormData(t),E=(C=e.submitter)==null?void 0:C.getAttribute("name");E&&_.append(E,((m=e.submitter)==null?void 0:m.getAttribute("value"))??"");const g=new AbortController;let I=!1;const L=await l({action:b,cancel:()=>I=!0,controller:g,get data(){return _},formData:_,get form(){return t},formElement:t,submitter:e.submitter})??f;if(I)return;let p;try{const r=await fetch(b,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:_,signal:g.signal});p=Lt(await r.text()),p.type==="error"&&(p.status=r.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;p={type:"error",error:r}}L({action:b,get data(){return _},formData:_,get form(){return t},formElement:t,update:r=>f({action:b,result:p,reset:r==null?void 0:r.reset}),result:p})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",c)}}}function Ct(t){let l,f,c,e,i,b='<div class="container-fluid"><a href="/login.html" class="navbar-brand svelte-2m1rv2">SNDI</a></div>',_,E,g,I,A,L,p,N="Login",j,C,m,r,v,P,J,D,X="Benutzername",G,T,h,z,K,M,Y="Passwort",Q,S,Z='<button type="submit" class="btn btn-primary">Login</button>',x,W,$;return{c(){l=s("meta"),f=V(),c=s("section"),e=s("div"),i=s("nav"),i.innerHTML=b,_=V(),E=s("div"),g=s("div"),I=s("div"),A=s("div"),L=s("div"),p=s("h5"),p.textContent=N,j=V(),C=s("div"),m=s("form"),r=s("div"),v=s("input"),J=V(),D=s("label"),D.textContent=X,G=V(),T=s("div"),h=s("input"),K=V(),M=s("label"),M.textContent=Y,Q=V(),S=s("div"),S.innerHTML=Z,this.h()},l(u){const y=ht("svelte-1yk2yl2",document.head);l=o(y,"META",{name:!0,content:!0}),y.forEach(d),f=k(u),c=o(u,"SECTION",{});var tt=w(c);e=o(tt,"DIV",{class:!0});var B=w(e);i=o(B,"NAV",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-12l9art"&&(i.innerHTML=b),_=k(B),E=o(B,"DIV",{class:!0});var et=w(E);g=o(et,"DIV",{class:!0});var at=w(g);I=o(at,"DIV",{class:!0});var nt=w(I);A=o(nt,"DIV",{class:!0});var rt=w(A);L=o(rt,"DIV",{class:!0});var F=w(L);p=o(F,"H5",{class:!0,"data-svelte-h":!0}),O(p)!=="svelte-1n40lkb"&&(p.textContent=N),j=k(F),C=o(F,"DIV",{class:!0});var st=w(C);m=o(st,"FORM",{method:!0});var H=w(m);r=o(H,"DIV",{class:!0});var q=w(r);v=o(q,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),J=k(q),D=o(q,"LABEL",{for:!0,"data-svelte-h":!0}),O(D)!=="svelte-1ubyjfg"&&(D.textContent=X),q.forEach(d),G=k(H),T=o(H,"DIV",{class:!0});var U=w(T);h=o(U,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),K=k(U),M=o(U,"LABEL",{for:!0,"data-svelte-h":!0}),O(M)!=="svelte-2d9uwq"&&(M.textContent=Y),U.forEach(d),Q=k(H),S=o(H,"DIV",{class:!0,"data-svelte-h":!0}),O(S)!=="svelte-1wz249l"&&(S.innerHTML=Z),H.forEach(d),st.forEach(d),F.forEach(d),rt.forEach(d),nt.forEach(d),at.forEach(d),et.forEach(d),B.forEach(d),tt.forEach(d),this.h()},h(){document.title="Login",a(l,"name","description"),a(l,"content","Login Page"),a(i,"class","nav navbar bg-secondary-subtle svelte-2m1rv2"),a(p,"class","card-title p-1"),a(v,"type","text"),a(v,"class",P=t[2]===!0?"form-control":"form-control is-invalid"),a(v,"id","username"),a(v,"placeholder","Benutzername eingeben"),v.required=!0,a(D,"for","username"),a(r,"class","form-floating mb-3"),a(h,"type","password"),a(h,"class",z=t[2]===!0?"form-control":"form-control is-invalid"),a(h,"id","password"),a(h,"placeholder","Passwort eingeben"),h.required=!0,a(M,"for","password"),a(T,"class","form-floating mb-3"),a(S,"class","d-grid gap-2"),a(m,"method","action"),a(C,"class","card-text"),a(L,"class","card-body"),a(A,"class","card"),a(I,"class","col-md-6"),a(g,"class","row p-2 h-75 align-items-center justify-content-center"),a(E,"class","container svelte-2m1rv2"),a(e,"class","main svelte-2m1rv2")},m(u,y){n(document.head,l),lt(u,f,y),lt(u,c,y),n(c,e),n(e,i),n(e,_),n(e,E),n(E,g),n(g,I),n(I,A),n(A,L),n(L,p),n(L,j),n(L,C),n(C,m),n(m,r),n(r,v),R(v,t[0]),n(r,J),n(r,D),n(m,G),n(m,T),n(T,h),R(h,t[1]),n(T,K),n(T,M),n(m,Q),n(m,S),W||($=[it(v,"input",t[3]),it(h,"input",t[4]),dt(x=It.call(null,m,t[5]))],W=!0)},p(u,[y]){y&4&&P!==(P=u[2]===!0?"form-control":"form-control is-invalid")&&a(v,"class",P),y&1&&v.value!==u[0]&&R(v,u[0]),y&4&&z!==(z=u[2]===!0?"form-control":"form-control is-invalid")&&a(h,"class",z),y&2&&h.value!==u[1]&&R(h,u[1]),x&&ft(x.update)&&y&7&&x.update.call(null,u[5])},i:ot,o:ot,d(u){u&&(d(f),d(c)),d(l),W=!1,pt($)}}}async function Tt(t,l){const f=btoa(t+":"+l),c="/login/fetch/"+encodeURIComponent(t),e=await fetch(c,{method:"GET",headers:{Authorization:"Basic "+f,"Content-Type":"application/json; charset=utf-8"}}),i=await e.json();return e.status===200?(window.localStorage.setItem("auth",f),window.localStorage.setItem("current_user",t),window.localStorage.setItem("permissions",JSON.stringify(i.Ok)),window.open("/","_self"),!0):!1}function At(t,l,f){let c="",e="";var i=!0;function b(){c=this.value,f(0,c)}function _(){e=this.value,f(1,e)}return[c,e,i,b,_,()=>{Tt(c,e).then(g=>f(2,i=g))}]}class jt extends mt{constructor(l){super(),vt(this,l,At,Ct,ut,{})}}export{jt as component,kt as universal};
