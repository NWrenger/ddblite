import{s as ut,f as dt,i as ft,n as ot,r as pt}from"../chunks/scheduler.56f0b95c.js";import{S as mt,i as vt,g as s,s as V,z as ht,h as o,f,c as k,j as w,x as P,k as a,y as n,a as lt,A as R,B as it}from"../chunks/index.8ac81898.js";import{p as _t}from"../chunks/parse.bee59afc.js";import{j as bt,k as gt}from"../chunks/singletons.0efa8ccc.js";const yt=!0,kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:yt},Symbol.toStringTag,{value:"Module"})),wt=bt("invalidate_all");function Et(t){return gt.apply_action(t)}function Lt(t){const l=JSON.parse(t);return l.data&&(l.data=_t(l.data)),l}function ct(t){return HTMLElement.prototype.cloneNode.call(t)}function It(t,l=()=>{}){const p=async({action:e,result:i,reset:b})=>{i.type==="success"&&(b!==!1&&HTMLFormElement.prototype.reset.call(t),await wt()),(location.origin+location.pathname===e.origin+e.pathname||i.type==="redirect"||i.type==="error")&&Et(i)};async function c(e){var O,j,T,u;if(((O=e.submitter)!=null&&O.hasAttribute("formmethod")?e.submitter.formMethod:ct(t).method)!=="post")return;e.preventDefault();const b=new URL((j=e.submitter)!=null&&j.hasAttribute("formaction")?e.submitter.formAction:ct(t).action),_=new FormData(t),E=(T=e.submitter)==null?void 0:T.getAttribute("name");E&&_.append(E,((u=e.submitter)==null?void 0:u.getAttribute("value"))??"");const g=new AbortController;let I=!1;const L=await l({action:b,cancel:()=>I=!0,controller:g,get data(){return _},formData:_,get form(){return t},formElement:t,submitter:e.submitter})??p;if(I)return;let m;try{const r=await fetch(b,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:_,signal:g.signal});m=Lt(await r.text()),m.type==="error"&&(m.status=r.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;m={type:"error",error:r}}L({action:b,get data(){return _},formData:_,get form(){return t},formElement:t,update:r=>p({action:b,result:m,reset:r==null?void 0:r.reset}),result:m})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",c)}}}function Tt(t){let l,p,c,e,i,b='<div class="container-fluid"><a href="/login.html" class="navbar-brand svelte-2m1rv2">SNDI</a></div>',_,E,g,I,A,L,m,O="Login",j,T,u,r,v,N,J,D,X="Benutzername",G,C,h,z,K,S,Y="Passwort",Q,M,Z='<button type="submit" class="btn btn-primary">Login</button>',x,W,$;return{c(){l=s("meta"),p=V(),c=s("section"),e=s("div"),i=s("nav"),i.innerHTML=b,_=V(),E=s("div"),g=s("div"),I=s("div"),A=s("div"),L=s("div"),m=s("h5"),m.textContent=O,j=V(),T=s("div"),u=s("form"),r=s("div"),v=s("input"),J=V(),D=s("label"),D.textContent=X,G=V(),C=s("div"),h=s("input"),K=V(),S=s("label"),S.textContent=Y,Q=V(),M=s("div"),M.innerHTML=Z,this.h()},l(d){const y=ht("svelte-1yk2yl2",document.head);l=o(y,"META",{name:!0,content:!0}),y.forEach(f),p=k(d),c=o(d,"SECTION",{});var tt=w(c);e=o(tt,"DIV",{class:!0});var B=w(e);i=o(B,"NAV",{class:!0,"data-svelte-h":!0}),P(i)!=="svelte-12l9art"&&(i.innerHTML=b),_=k(B),E=o(B,"DIV",{class:!0});var et=w(E);g=o(et,"DIV",{class:!0});var at=w(g);I=o(at,"DIV",{class:!0});var nt=w(I);A=o(nt,"DIV",{class:!0});var rt=w(A);L=o(rt,"DIV",{class:!0});var F=w(L);m=o(F,"H5",{class:!0,"data-svelte-h":!0}),P(m)!=="svelte-1n40lkb"&&(m.textContent=O),j=k(F),T=o(F,"DIV",{class:!0});var st=w(T);u=o(st,"FORM",{method:!0,action:!0});var H=w(u);r=o(H,"DIV",{class:!0});var q=w(r);v=o(q,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),J=k(q),D=o(q,"LABEL",{for:!0,"data-svelte-h":!0}),P(D)!=="svelte-1ubyjfg"&&(D.textContent=X),q.forEach(f),G=k(H),C=o(H,"DIV",{class:!0});var U=w(C);h=o(U,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),K=k(U),S=o(U,"LABEL",{for:!0,"data-svelte-h":!0}),P(S)!=="svelte-2d9uwq"&&(S.textContent=Y),U.forEach(f),Q=k(H),M=o(H,"DIV",{class:!0,"data-svelte-h":!0}),P(M)!=="svelte-1wz249l"&&(M.innerHTML=Z),H.forEach(f),st.forEach(f),F.forEach(f),rt.forEach(f),nt.forEach(f),at.forEach(f),et.forEach(f),B.forEach(f),tt.forEach(f),this.h()},h(){document.title="Login",a(l,"name","description"),a(l,"content","Login Page"),a(i,"class","nav navbar bg-secondary-subtle svelte-2m1rv2"),a(m,"class","card-title p-1"),a(v,"type","text"),a(v,"class",N=t[2]===!0?"from-control":"from-control is-invalid"),a(v,"id","username"),a(v,"placeholder","Benutzername eingeben"),v.required=!0,a(D,"for","username"),a(r,"class","form-floating mb-3"),a(h,"type","password"),a(h,"class",z=t[2]===!0?"from-control":"from-control is-invalid"),a(h,"id","password"),a(h,"placeholder","Passwort eingeben"),h.required=!0,a(S,"for","password"),a(C,"class","form-floating mb-3"),a(M,"class","d-grid gap-2"),a(u,"method","POST"),a(u,"action","?/enter"),a(T,"class","card-text"),a(L,"class","card-body"),a(A,"class","card"),a(I,"class","col-md-6"),a(g,"class","row p-2 h-75 align-items-center justify-content-center"),a(E,"class","container svelte-2m1rv2"),a(e,"class","main svelte-2m1rv2")},m(d,y){n(document.head,l),lt(d,p,y),lt(d,c,y),n(c,e),n(e,i),n(e,_),n(e,E),n(E,g),n(g,I),n(I,A),n(A,L),n(L,m),n(L,j),n(L,T),n(T,u),n(u,r),n(r,v),R(v,t[0]),n(r,J),n(r,D),n(u,G),n(u,C),n(C,h),R(h,t[1]),n(C,K),n(C,S),n(u,Q),n(u,M),W||($=[it(v,"input",t[3]),it(h,"input",t[4]),dt(x=It.call(null,u,t[5]))],W=!0)},p(d,[y]){y&4&&N!==(N=d[2]===!0?"from-control":"from-control is-invalid")&&a(v,"class",N),y&1&&v.value!==d[0]&&R(v,d[0]),y&4&&z!==(z=d[2]===!0?"from-control":"from-control is-invalid")&&a(h,"class",z),y&2&&h.value!==d[1]&&R(h,d[1]),x&&ft(x.update)&&y&7&&x.update.call(null,d[5])},i:ot,o:ot,d(d){d&&(f(p),f(c)),f(l),W=!1,pt($)}}}async function Ct(t,l){const p=btoa(t+":"+l),c="/login/fetch/"+encodeURIComponent(t),e=await fetch(c,{method:"GET",headers:{Authorization:"Basic "+p,"Content-Type":"application/json; charset=utf-8"}}),i=await e.json();return e.status===200?(window.localStorage.setItem("auth",p),window.localStorage.setItem("current_user",t),window.localStorage.setItem("permissions",JSON.stringify(i.Ok)),window.open("/","_self"),!0):!1}function At(t,l,p){let c="",e="";var i;function b(){c=this.value,p(0,c)}function _(){e=this.value,p(1,e)}return[c,e,i,b,_,()=>{Ct(c,e).then(g=>p(2,i=g))}]}class jt extends mt{constructor(l){super(),vt(this,l,At,Tt,ut,{})}}export{jt as component,kt as universal};
